{% extends 'layout.html' %}
{% block content %}
<body class="prevent-select">
  <div class="fix_menu">
    <h2 class="organiser">Club Organiser: {{ club_admin.organiser }} <button onclick="toggleEdit('organiserEditForm')" class="form_edit">✎</button></h2>
    
    <form id="organiserEditForm" method="POST" enctype="multipart/form-data" style="display:none;">
        {{ update_form.csrf_token }}
        {{ update_form.organiser() }}
        <input type="submit" name="update_club" value="Apply" class="change_sub_small">
    </form>
    <div class="scroll_container">
      <button onclick="scrollToSection('section1')" class="scroll">Go To Notices</button>
      <button onclick="scrollToSection('section2')" class="scroll">Go To Events</button>
    </div>
  </div>

  <div class="grid-container">
    <div class="item1">
      <h1 class="club_title">{{ club_admin.name }} Club<button onclick="toggleEdit('nameEditForm')" class="form_edit">✎</button></h1>
      <form id="nameEditForm" method="POST" enctype="multipart/form-data" style="display:none;">
          {{ update_form.csrf_token }}
          {{ update_form.name() }}
          <input type="submit" name="update_club" value="Apply" class="change_sub">
      </form>
      <p class="club_room">Club Common Room: {{ club_admin.club_room }} <button onclick="toggleEdit('roomEditForm')" class="form_edit">✎</button></p>
      <form id="roomEditForm" method="POST" enctype="multipart/form-data" style="display:none;">
          {{ update_form.csrf_token }}
          {{ update_form.club_room() }}
          <input type="submit" name="update_club" value="Apply" class="change_sub">
      </form>
      <div id="section1" class="section scroll-target">
        <h2 class="club_titles" id="notices_section">Notices</h2>
        
        <form method="POST" enctype="multipart/form-data" class="center">
          {{ notice_form.csrf_token }}
          {{ notice_form.photo }}
          {{ notice_form.notice }}
          {{ notice_form.date }}
          <input type="submit" value="+" class="sub_date">
        </form>
        <ul class="notices_container">
          {% for notice in club_admin.notices %}
            {% if notice.notice and notice.date %}
              <li class="multiple_notices">
                <div class="notice_section center">
                  {{ notice.notice }}
                </div>
                &nbsp;
                <div class="date_section_not">Uploaded At {{ notice.date }}</div>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
      &nbsp;
      &nbsp;
      <div id="section2" class="section scroll-target">
        <h2 class="club_titles" id="events_section">Events</h2>
        <form method="POST" enctype="multipart/form-data" class="center">
          {{ event_form.csrf_token }}
          {{ event_form.photo }}
          {{ event_form.name }}
          {{ event_form.location }}
          {{ event_form.date }}
          <input type="submit" value="+" class="sub_date">
        </form>
        <ul class="events_container">
          {% for event in club_admin.events %}
            <li class="multiple_events">
              
              <div class="event_section center">
                <!-- <h3 style="margin-bottom: 3%;">Event</h3> -->
                {{event.name}}
                {{event.location}}
              </div>
              &nbsp;
              <div class="date_section_eve">Date: {{event.date}}</div>

            </li>
          {% endfor %}
        </ul>
      </div>
      <form method="POST" enctype="multipart/form-data" class="center">
        {{ photo_form.csrf_token }}
        {{ photo_form.photo}}
        {{ photo_form.description }}
        <input type="submit" value="+" class="sub_date">
      </form>
  
      <ul class="photo_container">
        {% for photo in club_admin.photos %}
        <li class="multi_photo shadow">
            <img class="photo_pic rounded-20 prevent-select club_photos shadow" src="/{{photo.photo}}"/>
        </li>
        {% endfor %}
      </ul>
    </div>
  <div class="item2">
    <img class="club_pro shadow rounded-20" src="/{{ club_admin.pro_photo }}" />
    &nbsp;
    <button onclick="toggleEdit('photoEditForm')" class="form_edit">✎ Change Profile Photo</button>
    <form id="photoEditForm" method="POST" enctype="multipart/form-data" style="display:none;">
        {{ update_form.csrf_token }}
        {{ update_form.pro_photo() }}
        <input type="submit" name="update_club" value="Apply" class="change_sub_small">
    </form>
    &nbsp;
    <p class="club_about">{{ club_admin.description }} <button onclick="toggleEdit('descriptionEditForm')" class="form_edit">✎</button></p>
    
    
    <form id="descriptionEditForm" method="POST" enctype="multipart/form-data" style="display:none;">
        {{ update_form.csrf_token }}
        {{ update_form.description() }}
        <input type="submit" name="update_club" value="Apply" class="change_sub_small">
    </form>
    <button id="myButton" class="photo_pop">Click Me To See Photos</button>
  </div>
</div>
<div id="myPopup" class="popup">
  <div class="popup-content">
    <form method="POST" enctype="multipart/form-data" class="center">
      {{ photo_form.csrf_token }}
      {{ photo_form.photo}}
      {{ photo_form.description }}
      <input type="submit" value="+" class="sub_date">
    </form>

    <ul class="photo_container">
      {% for photo in club_admin.photos %}
      <li class="multi_photo shadow">
          <img class="photo_pic rounded-20 prevent-select club_photos shadow" src="/{{photo.photo}}"/>
      </li>
      {% endfor %}
    </ul>
    <button id="closePopup" class="pop_close prevent-select">X</button>
  </div>
</div>
</body>

<script>
  myButton.addEventListener(
      "click",
      function () {
          myPopup.classList.add("show");
      }
  );
  closePopup.addEventListener(
      "click",
      function () {
          myPopup.classList.remove(
              "show"
          );
      }
  );
  window.addEventListener(
      "click",
      function (event) {
          if (event.target == myPopup) {
              myPopup.classList.remove(
                  "show"
              );
          }
      }
  );

function scrollToSection(sectionId) {
      const section = document.getElementById(sectionId);
      const yOffset = -60; // Adjust based on your needs
      const y = section.getBoundingClientRect().top + window.pageYOffset + yOffset;

      window.scrollTo({
          top: y,
          behavior: 'smooth'
      });
  }

  function toggleEdit(formId) {
      var form = document.getElementById(formId);
      if (form.style.display === "none") {
          form.style.display = "block";
      } else {
          form.style.display = "none";
      }
  }
</script>

<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>

</body>



{% endblock %}